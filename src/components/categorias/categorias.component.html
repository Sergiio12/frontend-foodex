<main class="main-content">
  
  <app-loading-modal *ngIf="isLoading" ></app-loading-modal>

  <app-error-modal 
    *ngIf="errorMessage && !isLoading"
    [errorMessage]="errorMessage"
    (retry)="onRetry()"
    (close)="onCloseErrorModal()">
  </app-error-modal>

  <div *ngIf="!isLoading && !errorMessage" class="categorias-grid">
    <div class="section-header">
      <h1 class="section-title">Explora Nuestras Categorías</h1>
      <p class="section-subtitle">Descubre una selección única de productos cuidadosamente seleccionados</p>
    </div>
    
    <div class="grid-container">
      <article class="categoria-card" 
           *ngFor="let categoria of categorias"
           (mouseenter)="hoverState = categoria.id"
           (mouseleave)="hoverState = null"
           [class.card-hover]="hoverState === categoria.id">
        <div class="card-inner">
          <div class="image-wrapper">
            <img [src]="categoria.imgUrl" 
                 [alt]="categoria.nombre" 
                 class="categoria-image"
                 [class.image-zoom]="hoverState === categoria.id"
                 loading="lazy">
            <div class="image-overlay"></div>
            
            <button *ngIf="hasAdminRole()" class="edit-button" (click)="editCategoria(categoria)">
              <svg class="edit-icon" viewBox="0 0 24 24">
                <path fill="currentColor" d="M20.7 7c.4-.4.4-1 0-1.4l-2.3-2.3c-.4-.4-1-.4-1.4 0l-1.8 1.8L19 8.1M3 17.2V21h3.8l11-11.1l-3.7-3.8L3 17.2"/>
              </svg>
            </button>
          </div>
          
          <div class="card-content">
            <div class="text-content">
              <h3 class="categoria-title">{{ categoria.nombre }}</h3>
              <p class="categoria-description">{{ categoria.descripcion }}</p>
            </div>
            <button class="explore-button">
              Ver productos
              <svg class="arrow-icon" viewBox="0 0 24 24">
                <path fill="currentColor" d="M4 11v2h12l-5.5 5.5l1.4 1.4l7.9-7.9l-7.9-7.9l-1.4 1.4L16 11H4"/>
              </svg>
            </button>
          </div>
        </div>
      </article>
    </div>
  </div>
</main>